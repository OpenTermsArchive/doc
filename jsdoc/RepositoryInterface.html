<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Interface: RepositoryInterface</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Interface: RepositoryInterface</h1>

    




<section>

<header>
    
        <h2>RepositoryInterface</h2>
        
            <div class="class-description">Interface for classes that model a collection of domain objects with querying capabilities</div>
        
    
</header>

<article>
    <div class="container-overview">
    
        

        


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="archivist_recorder_repositories_interface.js.html">archivist/recorder/repositories/interface.js</a>, <a href="archivist_recorder_repositories_interface.js.html#line6">line 6</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="https://martinfowler.com/eaaCatalog/repository.html">Repository</a></li>
        </ul>
    </dd>
    

    
</dl>


        
    
    </div>

    

    

    

    

    

    

    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    
    <h4 class="name" id="count"><span class="type-signature">(async) </span>count<span class="signature">()</span><span class="type-signature"> &rarr; {Promise.&lt;number>}</span></h4>
    

    



<div class="description">
    Count the total number of records in the repository
For performance reasons, use this method rather than counting the number of entries returned by #findAll if you only need the size of a repository
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="archivist_recorder_repositories_interface.js.html">archivist/recorder/repositories/interface.js</a>, <a href="archivist_recorder_repositories_interface.js.html#line77">line 77</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    Promise that will be resolved with the total number of records
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;number></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="finalize"><span class="type-signature">(async) </span>finalize<span class="signature">()</span><span class="type-signature"> &rarr; {Promise.&lt;Repository>}</span></h4>
    

    



<div class="description">
    [Optional] Finalize repository
Override this method if the repository needs some asynchronous code to properly close the repository (close database connection, push changes on Git remote…)
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="archivist_recorder_repositories_interface.js.html">archivist/recorder/repositories/interface.js</a>, <a href="archivist_recorder_repositories_interface.js.html#line23">line 23</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    Promise that will be resolved with the current repository instance
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;Repository></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="findAll"><span class="type-signature">(async) </span>findAll<span class="signature">()</span><span class="type-signature"> &rarr; {Promise.&lt;Array.&lt;<a href="Record.html">Record</a>>>}</span></h4>
    

    



<div class="description">
    Find all records
For performance reasons, the content of the records will not be loaded by default. Use #loadRecordContent to load the content of individual records
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="archivist_recorder_repositories_interface.js.html">archivist/recorder/repositories/interface.js</a>, <a href="archivist_recorder_repositories_interface.js.html#line67">line 67</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="RepositoryInterface.html#loadRecordContent">RepositoryInterface#loadRecordContent</a></li>
        </ul>
    </dd>
    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    Promise that will be resolved with an array of all records
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;Array.&lt;<a href="Record.html">Record</a>>></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="findById"><span class="type-signature">(async) </span>findById<span class="signature">(recordId)</span><span class="type-signature"> &rarr; {Promise.&lt;<a href="Record.html">Record</a>>}</span></h4>
    

    



<div class="description">
    Find the record that matches the given record ID
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>recordId</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">Record ID of the record to find</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="archivist_recorder_repositories_interface.js.html">archivist/recorder/repositories/interface.js</a>, <a href="archivist_recorder_repositories_interface.js.html#line56">line 56</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    Promise that will be resolved with the found record or an empty object if none match the given ID
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;<a href="Record.html">Record</a>></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="findLatest"><span class="type-signature">(async) </span>findLatest<span class="signature">(serviceId, termsType, documentId<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {Promise.&lt;<a href="Record.html">Record</a>>}</span></h4>
    

    



<div class="description">
    Find the most recent record that matches the given service ID and terms type and optionally the document ID
In case of snapshots, if the record is related to terms extracted from multiple source documents, the document ID is required to find the source snapshot
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>serviceId</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last">Service ID of record to find</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>termsType</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last">Terms type of record to find</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>documentId</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">Document ID of record to find. Used to identify the source in terms extracted from multiple source documents. Not necessary for terms with a single source document</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="archivist_recorder_repositories_interface.js.html">archivist/recorder/repositories/interface.js</a>, <a href="archivist_recorder_repositories_interface.js.html#line46">line 46</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    Promise that will be resolved with the found record or an empty object if none match the given criteria
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;<a href="Record.html">Record</a>></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="initialize"><span class="type-signature">(async) </span>initialize<span class="signature">()</span><span class="type-signature"> &rarr; {Promise.&lt;Repository>}</span></h4>
    

    



<div class="description">
    [Optional] Initialize repository
Override this method if the repository needs some asynchronous initialization code (open database connection and create collections, initialize Git…)
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="archivist_recorder_repositories_interface.js.html">archivist/recorder/repositories/interface.js</a>, <a href="archivist_recorder_repositories_interface.js.html#line13">line 13</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    Promise that will be resolved with the current repository instance
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;Repository></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="iterate"><span class="type-signature">(async, generator) </span>iterate<span class="signature">()</span><span class="type-signature"> &rarr; {<a href="Record.html">Record</a>}</span></h4>
    

    



<div class="description">
    Iterate over all records in the repository, from oldest to most recent
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="archivist_recorder_repositories_interface.js.html">archivist/recorder/repositories/interface.js</a>, <a href="archivist_recorder_repositories_interface.js.html#line86">line 86</a>
    </li></ul></dd>
    

    

    

    
</dl>

















<h5>Yields:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type"><a href="Record.html">Record</a></span>


    </dd>
</dl>

    



        
            

    

    
    <h4 class="name" id="loadRecordContent"><span class="type-signature">(async) </span>loadRecordContent<span class="signature">(record)</span><span class="type-signature"> &rarr; {Promise.&lt;<a href="Record.html">Record</a>>}</span></h4>
    

    



<div class="description">
    Load content of the given record
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>record</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="Record.html">Record</a></span>


            
            </td>

            

            

            <td class="description last">Record of which to populate content</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="archivist_recorder_repositories_interface.js.html">archivist/recorder/repositories/interface.js</a>, <a href="archivist_recorder_repositories_interface.js.html#line105">line 105</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    Promise that will be resolved with the given record when its content has been loaded
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;<a href="Record.html">Record</a>></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="removeAll"><span class="type-signature">(async) </span>removeAll<span class="signature">()</span><span class="type-signature"> &rarr; {Promise}</span></h4>
    

    



<div class="description">
    Remove all records
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="archivist_recorder_repositories_interface.js.html">archivist/recorder/repositories/interface.js</a>, <a href="archivist_recorder_repositories_interface.js.html#line95">line 95</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    Promise that will be resolved when all records are removed
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="save"><span class="type-signature">(async) </span>save<span class="signature">(record)</span><span class="type-signature"> &rarr; {Promise.&lt;<a href="Record.html">Record</a>>}</span></h4>
    

    



<div class="description">
    Persist the given record if it does not already exist in repository
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>record</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="Record.html">Record</a></span>


            
            </td>

            

            

            <td class="description last">Record to persist</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="archivist_recorder_repositories_interface.js.html">archivist/recorder/repositories/interface.js</a>, <a href="archivist_recorder_repositories_interface.js.html#line33">line 33</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    Promise that will be resolved with the given record when it has been persisted
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;<a href="Record.html">Record</a>></span>


    </dd>
</dl>

    





        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Record.html">Record</a></li></ul><h3>Interfaces</h3><ul><li><a href="RepositoryInterface.html">RepositoryInterface</a></li></ul><h3>Global</h3><ul><li><a href="global.html#router">router</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.0</a> on Mon Nov 20 2023 13:08:46 GMT+0000 (Coordinated Universal Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>